---
import Card from "@components/ui/Card.astro";
import { getCollection} from "astro:content"
const posts = await getCollection('posts');

const latestPosts = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()).slice(0, 2);
---

<div class="max-w-4xl mx-auto px-6 py-20">
    <div class="flex items-center justify-center mb-12 gap-2">
        <span class="text-amber-400 text-sm font-semibold tracking-[0.2em] uppercase">Writing</span>
        <span class="text-amber-400 text-xl font-mono">â†’</span>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        {latestPosts.map((post, idx) => (
            <a href={`/posts/${post.slug}`} class="block">
                <div class="glass-card rounded-2xl p-6 h-full transition-all duration-300 hover:border-amber-500/30">
                    {post.data.coverImage && (
                        <img
                            src={post.data.coverImage}
                            alt={post.data.title}
                            class="w-full h-40 object-cover rounded-xl mb-5 opacity-80"
                        />
                    )}
                    <h3 class="text-lg font-semibold text-white mb-2 line-clamp-2">{post.data.title}</h3>
                    <p class="text-gray-300 text-sm mb-4 line-clamp-2">{post.data.description}</p>
                    <span class="text-gray-400 text-xs font-mono">{new Date(post.data.date).toLocaleDateString()}</span>
                </div>
            </a>
        ))}
    </div>
</div>
